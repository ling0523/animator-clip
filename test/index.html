<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>animator</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
		<!-- <script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.3.4/vconsole.min.js"></script>
		<script>
			new VConsole();
		</script> -->
	</head>
	<body style="overflow: hidden;">
		<button type="button" onclick="reset()">重置</button>
		<button type="button" onclick="start()">开始</button>
		<button type="button" onclick="stop()">停止</button>
		<button type="button" onclick="getClips()">获取正在运行的clips</button>
		<div style="width: 60px;height: 100px;background-color: #FF0000;position: absolute;left: 5rem;top: 5rem;" id="el"></div>
	</body>
	<script src="../dist/animator-clip.js" type="text/javascript" charset="utf-8"></script>
	<script>
		const {Animator,Clip} = AnimatorClip;
		var animator = new Animator ('#el');
		var clip = new Clip()
		animator.addClip(clip);
		var scale = 1;
		clip.on('update',function(el){
			if(scale >= 0.2){
				scale -= 0.01;
				el.style.transform = 'scale('+scale+')'
			}else {
				this.emitComplete();
			}
		})
		clip.on('start',function(el){
			console.log('clip开始')
		})
		clip.on('complete',function(el){
			console.log('clip完成')
		})
		clip.on('stop',function(el){
			console.log('clip停止')
		})
		clip.on('reset',function(el){
			console.log('clip重置')
			scale = 1;
			el.style.transform = 'scale('+scale+')'
		})
		var clip2 = new Clip({
			style:'left',
			value:'20rem',
			speed:0.5
		})
		clip.chain(clip2)
		console.log(clip)
		function start(){
			animator.start();
		}
		function stop(){
			animator.stop();
		}
		function reset(){
			animator.reset();
		}
		
		function getClips(){
			console.log(animator.getClips());
		}
	</script>
</html>
